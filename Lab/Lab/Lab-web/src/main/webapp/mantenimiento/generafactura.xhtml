<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <body>
        <ui:composition template="./../menu/menu.xhtml">
            <ui:define name="body">

                <p:growl 
                    id="msgs" 
                    showDetail="true" 
                    />  
                <h:form>
                    <p:panel 
                        id="horizontal" 
                        header="Facturas" 
                        toggleable="true" 
                        toggleOrientation="horizontal"
                        >

                        <h:panelGrid 
                            columns="12" 
                            cellpadding="10"
                            >

                            <h1><h:outputText value="List"/></h1>
                            <p:dataTable 
                                value="#{generaFacturaMB.listaGeneraFactura}" 
                                var="item"
                                selectionMode="single" 
                                selection="#{generaFacturaMB.registroSeleccionado}"
                                reflow="true"
                                paginator="true"
                                rowKey="#{item.pk}"
                                rows="10"
                                rowsPerPageTemplate="10,20,30,40,50"
                                >

                                <p:ajax 
                                    event="rowSelect" 
                                    listener="#{generaFacturaMB.onRowSelect}"  
                                    update="@form msgs"
                                    />


                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="FechaSolicitud"/>
                                    </f:facet>
                                    <h:outputText value="#{item.fechaSolicitud}">
                                        <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                    </h:outputText>
                                </p:column>
                                <p:column  
                                    filterBy="#{item.ccPaga}" 
                                    filterMatchMode="contains"

                                    >
                                    <f:facet name="header">
                                        <h:outputText value="CcPaga"/>
                                    </f:facet>
                                    <h:outputText value="#{item.ccPaga}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="NombrePaga"/>
                                    </f:facet>
                                    <h:outputText value="#{item.nombrePaga}"/>
                                </p:column>
                                <p:column
                                    filterBy="#{item.apellPaga}" 
                                    filterMatchMode="contains"

                                    >
                                    <f:facet name="header">
                                        <h:outputText value="ApellPaga"/>
                                    </f:facet>
                                    <h:outputText value="#{item.apellPaga}"/>
                                </p:column>
                                <p:column
                                    filterBy="#{item.nombreOrg}" 
                                    filterMatchMode="contains"

                                    >
                                    <f:facet name="header">
                                        <h:outputText value="NombreOrg"/>
                                    </f:facet>
                                    <h:outputText value="#{item.nombreOrg}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="IdOrg"/>
                                    </f:facet>
                                    <h:outputText value="#{item.idOrg}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Idsolic"/>
                                    </f:facet>
                                    <h:outputText value="#{item.idsolic}"/>
                                </p:column>
                                <p:column 
                                    filterBy="#{item.cedPaciente}" 
                                    filterMatchMode="contains"

                                    >
                                    <f:facet name="header">
                                        <h:outputText value="CedPaciente"/>
                                    </f:facet>
                                    <h:outputText value="#{item.cedPaciente}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="NombrePaciente"/>
                                    </f:facet>
                                    <h:outputText value="#{item.nombrePaciente}"/>
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="ApellidoPaciente"/>
                                    </f:facet>
                                    <h:outputText value="#{item.apellidoPaciente}"/>
                                </p:column>
                            </p:dataTable>
                            <a 
                                href="http://localhost:8080/Lab-web/fact"
                                target="_blank"
                                >
                                Ver Factura Seleccionada
                            </a>

                        </h:panelGrid>
                    </p:panel>
                </h:form>

            </ui:define>
        </ui:composition>
    </body>
</html>